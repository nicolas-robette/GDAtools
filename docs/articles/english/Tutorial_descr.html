<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Descriptive analysis of statistical associations with GDAtools • GDAtools</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Descriptive analysis of statistical associations with GDAtools">
<meta property="og:description" content="GDAtools">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">GDAtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/english/Tutorial_GDA.html">Geometric Data Analysis with GDAtools</a>
    </li>
    <li>
      <a href="../../articles/english/Tutorial_descr.html">Descriptive analysis of statistical associations with GDAtools</a>
    </li>
    <li>
      <a href="../../articles/french/Tutoriel_AGD.html">L'analyse géométrique des données avec GDAtools</a>
    </li>
    <li>
      <a href="../../articles/french/Tutoriel_descr.html">L'analyse descriptive des associations statistiques avec GDAtools</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nicolas-robette/GDAtools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Descriptive analysis of statistical associations
with GDAtools</h1>
                        <h4 data-toc-skip class="author">Nicolas
Robette</h4>
            
            <h4 data-toc-skip class="date">2022-11-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nicolas-robette/GDAtools/blob/HEAD/vignettes/english/Tutorial_descr.Rmd" class="external-link"><code>vignettes/english/Tutorial_descr.Rmd</code></a></small>
      <div class="hidden name"><code>Tutorial_descr.Rmd</code></div>

    </div>

    
    
<p> </p>
<p><code>GDAtools</code> package provides some functions dedicated to
the description of statistical associations between variables. They are
based on effect size measures (also called association measures).</p>
<p>All these measures are built from simple concepts (correlations,
proportion of variance explained), they are bounded (between -1 and 1 or
between 0 and 1) and are not sensitive to the number of
observations.</p>
<p>The measures of <em>global</em> association are the following.</p>
<ul>
<li><p>For the relationship between two categorical variables: the
<strong>Cramér’s V</strong> which, unlike the chi-square, for example,
is not sensitive to the number of observations or the number of
categories of the variables. It varies between 0 (no association) and 1
(perfect association). Squared, it can be interpreted as the share of
variation shared between two variables.</p></li>
<li><p>For the relationship between two numerical variables: Kendall’s
(<em>tau</em>) or Spearman’s (<em>rho</em>) <strong>rank
correlations</strong>, which detect <em>monotonic</em> relationships
between variables, and not only linear ones as is the case with
Pearson’s linear correlation. They vary between -1 and 1. An absolute
value of 0 indicates no association, an absolute value of 1 a perfect
association. The sign indicates the direction of the
relationship.</p></li>
<li><p>For the relationship between a categorical variable and a
numerical variable: the square of the <strong>correlation ratio</strong>
(<em>eta²</em>). It expresses the proportion of the variance of the
numerical variable “explained” by the categorical variable and varies
between 0 and 1.</p></li>
</ul>
<p>In addition to measures of global association, we also use measures
of <em>local</em> association, i.e. at the level of the categories of
the variables.</p>
<ul>
<li><p>For the relationship between two categorical variables: the
<strong>phi coefficient</strong> measures the attraction or repulsion in
a cell of a contingency table. It varies between -1 and 1. An absolute
value of 0 indicates an absence of association, an absolute value of 1 a
perfect association. There is attraction if the sign is positive,
repulsion if the sign is negative. Squared, phi is interpreted as the
proportion of variance shared by the two binary variables associated
with the categories studied. Unlike the <em>test value</em>, phi is not
sensitive to the sample size.</p></li>
<li><p>For the relationship between a categorical variable and a
numerical variable: the <strong>point biserial correlation</strong>
measures the magnitude of the difference between the means of the
numerical variable according to whether or not one belongs to the
category studied. It varies between -1 and 1. An absolute value of 0
indicates no association, an absolute value of 1 a perfect association.
The sign indicates the direction of the relationship. When squared,
point biserial correlation can be interpreted as the proportion of
variance of the numerical variable “explained” by the category of the
categorical variable.</p></li>
</ul>
<p>Note that if we code the categories of the categorical variables as
binary variables with values of 0 or 1, the phi coefficient and the
point biserial correlation are equivalent to Pearson’s correlation
coefficient.</p>
<p>For more details on these effect size measurements, see: Rakotomalala
R., <a href="http://eric.univ-lyon2.fr/~ricco/cours/slides/effect_size.pdf" class="external-link">« Comprendre
la taille d’effet (effect size) »</a><br>
 </p>
<p>In some functions of <code>GDAtools</code>, association measures can
be completed by <strong>permutation tests</strong>, which are part of
<em>combinatorial inference</em> and constitute a <em>nonparametric</em>
alternative to the significance tests of frequentist inference. A
permutation test is performed in several steps.</p>
<ol style="list-style-type: decimal">
<li><p>A measure of association between the two variables under study is
computed.</p></li>
<li><p>The same measure of association is calculated from a “permuted”
version of the data, i.e. by randomly “mixing” the values of one of the
variables, in order to “break” the relationship between the
variables.</p></li>
<li><p>Repeat step 2 a large number of times. This gives an
<em>empirical</em> distribution (as opposed to the use of a
<em>theoretical</em> distribution by frequentist inference) of the
measure of association under the H0 hypothesis of no relationship
between the two variables.</p></li>
<li><p>The result of step 1 is compared with the distribution obtained
in 3. The <em>p-value</em> of the permutation test is the proportion of
values of the H0 distribution that are more extreme than the measure of
association observed in 1.</p></li>
</ol>
<p>If all possible permutations are performed, the permutation test is
called “exact”. In practice, the computation time required is often too
important and only a part of the possible permutations is performed,
resulting in an “approximate” test. In the following examples, the
number of permutations is set to 100 to reduce the computation time, but
it is advisable to increase this number to obtain more accurate and
reliable results (for example <code>nperm</code>=1000).<br>
 </p>
<p>To illustrate the statistical association analysis functions of
<code>GDAtools</code>, we will use data on cinema. This is a sample of
1000 films released in France in the 2000s, for which we know the
budget, the genre, the country of origin, the “art et essai” label, the
selection in a festival (Cannes, Berlin or Venice), the average rating
of intellectual critics (according to Allociné) and the number of
admissions. Some of these variables are numerical, others are
categorical.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nicolas-robette/GDAtools" class="external-link">GDAtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">)</span></span></code></pre></div>
<pre><code>'data.frame':   1000 obs. of  7 variables:
 $ Budget   : num  3.10e+07 4.88e+06 3.50e+06 1.63e+08 2.17e+07 ...
 $ Genre    : Factor w/ 9 levels "Action","Animation",..: 1 5 7 1 7 5 1 7 5 7 ...
 $ Country  : Factor w/ 4 levels "Europe","France",..: 4 2 2 1 2 2 4 4 2 4 ...
 $ ArtHouse : Factor w/ 2 levels "No","Yes": 1 1 2 1 2 1 1 1 1 1 ...
 $ Festival : Factor w/ 2 levels "No","Yes": 1 1 1 1 1 1 1 1 1 1 ...
 $ Critics  : num  3 1 3.75 3.75 3.6 2.75 1 1 1 3 ...
 $ BoxOffice: num  1013509 24241 39376 6996996 493416 ...</code></pre>
<hr>
<div class="section level2">
<h2 id="relationship-between-two-variables">Relationship between two variables<a class="anchor" aria-label="anchor" href="#relationship-between-two-variables"></a>
</h2>
<p>The package offers several functions to study the statistical
relationship between two variables, depending on the nature (categorical
or numerical) of these variables.</p>
<div class="section level4">
<h4 id="two-categorical-variables">Two categorical variables<a class="anchor" aria-label="anchor" href="#two-categorical-variables"></a>
</h4>
<p>The function <code>assoc_twocat</code> computes :</p>
<ul>
<li>the contingency table (numbers)</li>
<li>the percentages, the row-percentages and the column-percentages</li>
<li>the theoretical numbers, i.e. in a situation of independence</li>
<li>the chi-square</li>
<li>the Cramér’s V and the p-value of the corresponding permutation
test</li>
<li>the Pearson residuals</li>
<li>the phi coefficients and the p-values of the corresponding
permutation tests</li>
<li>the global and local PEMs (Percentage of Maximum Deviation from
Independence, see Cibois 1993)</li>
<li>a summary table of these results</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/assoc.twocat.html">assoc.twocat</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Country</span>, <span class="va">Movies</span><span class="op">$</span><span class="va">ArtHouse</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>$freq
         No  Yes  Sum
Europe   39   33   72
France  212  393  605
Other     6   20   26
USA     257   40  297
Sum     514  486 1000

$prop
          No   Yes   Sum
Europe   3.9   3.3   7.2
France  21.2  39.3  60.5
Other    0.6   2.0   2.6
USA     25.7   4.0  29.7
Sum     51.4  48.6 100.0

$rprop
             No      Yes Sum
Europe 54.16667 45.83333 100
France 35.04132 64.95868 100
Other  23.07692 76.92308 100
USA    86.53199 13.46801 100
Sum    51.40000 48.60000 100

$cprop
               No        Yes   Sum
Europe   7.587549   6.790123   7.2
France  41.245136  80.864198  60.5
Other    1.167315   4.115226   2.6
USA     50.000000   8.230453  29.7
Sum    100.000000 100.000000 100.0

$expected
            No     Yes
Europe  37.008  34.992
France 310.970 294.030
Other   13.364  12.636
USA    152.658 144.342

$chi.squared
[1] 220.1263

$cramer.v
[1] 0.4691762

$permutation.pvalue
[1] 0

$global.pem
[1] 59.29383

$pearson.residuals
               No        Yes
Europe  0.3274474 -0.3367479
France -5.6123445  5.7717531
Other  -2.0143992  2.0716146
USA     8.4449945 -8.6848595

$std.pearson.residuals
               No        Yes
Europe   0.487584  -0.487584
France -12.809366  12.809366
Other   -2.927844   2.927844
USA     14.447862 -14.447862

$odds.ratios
               No        Yes
Europe  1.1270813  0.8872474
France  0.1661190  6.0197809
Other   0.2751969  3.6337625
USA    11.1500000  0.0896861

$local.pem
              No       Yes
Europe   5.69273  -5.69273
France -51.55493  51.55493
Other  -55.10326  55.10326
USA     72.28804 -72.28804

$phi
                No         Yes
Europe  0.01541876 -0.01541876
France -0.40506773  0.40506773
Other  -0.09258656  0.09258656
USA     0.45688150 -0.45688150

$phi.perm.pval
                 No          Yes
Europe 3.306866e-01 3.306866e-01
France 6.983864e-36 0.000000e+00
Other  6.509468e-04 6.509468e-04
USA    0.000000e+00 2.118151e-45

$gather
  var.y  var.x freq  prop     rprop      cprop expected  residuals std.residuals         or       pem         phi    perm.pval freq.x freq.y prop.x prop.y
1    No Europe   39 0.039 0.5416667 0.07587549   37.008  0.3274474      0.487584  1.1270813   5.69273  0.01541876 3.306866e-01     72    514  0.072  0.514
2    No France  212 0.212 0.3504132 0.41245136  310.970 -5.6123445    -12.809366  0.1661190 -51.55493 -0.40506773 6.983864e-36    605    514  0.605  0.514
3    No  Other    6 0.006 0.2307692 0.01167315   13.364 -2.0143992     -2.927844  0.2751969 -55.10326 -0.09258656 6.509468e-04     26    514  0.026  0.514
4    No    USA  257 0.257 0.8653199 0.50000000  152.658  8.4449945     14.447862 11.1500000  72.28804  0.45688150 0.000000e+00    297    514  0.297  0.514
 [ reached 'max' / getOption("max.print") -- omitted 4 rows ]</code></pre>
<p><br>
The function <code>ggassoc_crosstab</code> presents the contingency
table in graphical form, with rectangles whose area corresponds to the
numbers and whose color gradient corresponds to the
attractions/repulsions (phi coefficients). The Cramér’s V can be
displayed in a corner of the graph. Here, the “art et essai” label is
clearly over-represented among French films and under-represented among
American films.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/ggassoc_crosstab.html">ggassoc_crosstab</a></span><span class="op">(</span><span class="va">Movies</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Country</span>, y<span class="op">=</span><span class="va">ArtHouse</span><span class="op">)</span>, max.asso<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_descr_files/figure-html/ggassoc_crosstab-1.png" width="700"></p>
<p>The function <code>ggassoc_phiplot</code> proposes another way to
represent the attractions/repulsions. The width of the rectangles
corresponds to the numbers of the variable x, their height to the phi
coefficients. The rectangles are colored in black when there is
attraction, in white when there is repulsion.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/ggassoc_phiplot.html">ggassoc_phiplot</a></span><span class="op">(</span><span class="va">Movies</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Country</span>, y<span class="op">=</span><span class="va">ArtHouse</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_descr_files/figure-html/ggassoc_phiplot-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="one-categorical-variable-and-one-numerical-variable">One categorical variable and one numerical variable<a class="anchor" aria-label="anchor" href="#one-categorical-variable-and-one-numerical-variable"></a>
</h4>
<p>The <code>assoc_catcont</code> function computes:</p>
<ul>
<li>the squared correlation ratio (eta²) and the p-value of the
corresponding permutation test</li>
<li>the point biserial correlations and the p-values of the
corresponding permutation tests</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/assoc.catcont.html">assoc.catcont</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Country</span>, <span class="va">Movies</span><span class="op">$</span><span class="va">Critics</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>$eta.squared
[1] 0.0169216

$permutation.pvalue
[1] 8.354514e-10

$cor
Europe France  Other    USA 
 0.011  0.102  0.036 -0.128 

$cor.perm.pval
      Europe       France        Other          USA 
3.565770e-01 2.424620e-04 1.563909e-01 8.614717e-05 </code></pre>
<p><br>
The function <code>ggassoc_boxplot</code> represents the relationship
between the variables in the form of box-plots and/or “violin”
distributions. The eta² value is displayed in a corner of the graph.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/ggassoc_boxplot.html">ggassoc_boxplot</a></span><span class="op">(</span><span class="va">Movies</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Country</span>, y<span class="op">=</span><span class="va">Critics</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_descr_files/figure-html/ggassoc_boxplot-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="two-numerical-variables">Two numerical variables<a class="anchor" aria-label="anchor" href="#two-numerical-variables"></a>
</h4>
<p>The function <code>assoc_twocont</code> computes the Kendall and
Spearman rank correlations and the Pearson linear correlation, as well
as the p-values of the corresponding permutation tests.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/assoc.twocont.html">assoc.twocont</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Budget</span>, <span class="va">Movies</span><span class="op">$</span><span class="va">BoxOffice</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>                     pearson  spearman   kendall
value              0.6053018 0.7084613 0.5184719
permutation.pvalue 0.0000000 0.0000000 0.0000000</code></pre>
<p><br>
The function <code>ggassoc_scatter</code> represents the relationship
between the two variables in the form of a scatterplot, with an
approximation by smoothing (with the “Generalized Additive Model”
method). Kendall’s tau is displayed in a corner of the graph.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/ggassoc_scatter.html">ggassoc_scatter</a></span><span class="op">(</span><span class="va">Movies</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Budget</span>, y<span class="op">=</span><span class="va">BoxOffice</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_descr_files/figure-html/ggassoc_scatter-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="relationships-between-one-variable-y-and-a-set-of-variables-x">Relationships between one variable Y and a set of variables X<a class="anchor" aria-label="anchor" href="#relationships-between-one-variable-y-and-a-set-of-variables-x"></a>
</h2>
<p>Often, not just two variables are studied, but a larger set of
variables. When one of these variables has the status of an “explained”
variable, one generally uses regression models or, possibly, supervised
learning models (see the vignette of the <code>moreparty</code> package
for an example). However, it is essential to know all the bivariate
relations of the dataset before moving to an “all else being equal”
approach.</p>
<p>It should be noted that if we do this work in a meticulous way,
adding eventually the descriptive analysis of the relationships between
three or four variables, we often realize that the surplus of knowledge
brought by the regression models is quite limited.<br><br></p>
<p>The function <code>assoc.yx</code> computes the global association
between Y and each of the variables of X, and for all pairs of variables
of X.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/assoc.yx.html">assoc.yx</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">BoxOffice</span>, <span class="va">Movies</span><span class="op">[</span>,<span class="op">-</span><span class="fl">7</span><span class="op">]</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>$YX
  variable       measure association permutation.pvalue
1    Genre          Eta2       0.173              0.000
2 ArtHouse          Eta2       0.075              0.000
3  Country          Eta2       0.048              0.000
4   Budget Kendall's tau       0.518              0.000
5  Critics Kendall's tau       0.006              0.362
6 Festival          Eta2       0.000              0.766

$XX
   variable1 variable2       measure association permutation.pvalue
1      Genre  ArtHouse    Cramer's V       0.554              0.000
2    Country  ArtHouse    Cramer's V       0.469              0.000
3      Genre   Country    Cramer's V       0.275              0.000
4   ArtHouse  Festival    Cramer's V       0.229              0.000
5     Budget   Country          Eta2       0.287              0.000
6     Budget     Genre          Eta2       0.281              0.000
7   ArtHouse   Critics          Eta2       0.236              0.000
8     Budget  ArtHouse          Eta2       0.181              0.000
9      Genre   Critics          Eta2       0.090              0.000
10  Festival   Critics          Eta2       0.041              0.000
11    Budget   Critics Kendall's tau      -0.178              0.000
12     Genre  Festival    Cramer's V       0.183              0.000
13   Country   Critics          Eta2       0.017              0.000
14    Budget  Festival          Eta2       0.003              0.070
15   Country  Festival    Cramer's V       0.035              0.825</code></pre>
<p><br>
The functions <code>catdesc</code> and <code>condesc</code> allow to go
into more detail about the relationships, by going to the category
level.</p>
<p><code>catdesc</code> deals with the cases where Y is a categorical
variable. For a categorical variable X1, it computes, for a given
category of Y and a category of X1 :</p>
<ul>
<li>the percentage of the category of Y in the category of X1</li>
<li>the percentage of the X1 category in the Y category</li>
<li>the percentage of the X1 category in the whole sample</li>
<li>the phi coefficient</li>
</ul>
<p>The results are sorted by decreasing phi coefficient and can be
filtered to keep only the associations above a given threshold (in
absolute value).</p>
<p>For a numerical variable X2, for a given category of Y, it computes
:</p>
<ul>
<li>the median of X2 in the category of Y</li>
<li>the median of X2 in the whole sample</li>
<li>the dispersion of X2 in the Y category</li>
<li>the dispersion of X2 in the whole sample</li>
<li>the point biserial correlation</li>
</ul>
<p>Dispersion is measured by the “median absolute deviation” (MAD),
which is the median of the absolute deviations from the median. The
median and MAD are so-called “robust” indicators, i.e. not sensitive to
outliers.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/catdesc.html">catdesc</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Festival</span>, <span class="va">Movies</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">bylevel</span><span class="op">$</span><span class="va">Yes</span></span></code></pre></div>
<pre><code>$categories
          categories pct.ycat.in.xcat pct.xcat.in.ycat pct.xcat.global    phi
2       ArtHouse.Yes            0.140            0.883           0.486  0.229
3        Genre.Drama            0.149            0.468           0.241  0.153
9        Genre.Other            0.115            0.039           0.026  0.024
10    Country.Europe            0.097            0.091           0.072  0.021
11    Country.France            0.081            0.636           0.605  0.019
12     Genre.ComDram            0.087            0.169           0.149  0.016
14      Genre.Action            0.079            0.169           0.165  0.003
16     Country.Other            0.077            0.026           0.026  0.000
18       Genre.SciFi            0.061            0.039           0.049 -0.013
23       Country.USA            0.064            0.247           0.297 -0.032
24   Genre.Animation            0.022            0.013           0.046 -0.046
25      Genre.Horror            0.000            0.000           0.025 -0.046
26 Genre.Documentary            0.026            0.026           0.077 -0.055
27      Genre.Comedy            0.027            0.078           0.222 -0.100
29       ArtHouse.No            0.018            0.117           0.514 -0.229

$continuous.var
  variables median.x.in.ycat median.x.global mad.x.in.ycat mad.x.global    cor
1   Critics              3.5             2.9           0.6          0.6  0.204
3 BoxOffice         236910.7        138608.8      212598.2     137253.1  0.008
5    Budget        7689956.0       7040470.9     4865250.9    5920656.2 -0.057</code></pre>
<p><br><code>condesc</code> deals with the cases where Y is a numerical
variable. For a categorical variable X1, it computes :</p>
<ul>
<li>the median of Y in the category of X1</li>
<li>the median of Y in the whole sample</li>
<li>the dispersion of Y in the category of X1</li>
<li>the dispersion of Y in the whole sample</li>
<li>the point biserial correlation</li>
</ul>
<p>The results are sorted by decreasing point biserial correlation and
can be filtered to keep only associations above a given threshold (in
absolute value).</p>
<p>For the numerical variables of X, it calculates the Kendall’s
tau.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/condesc.html">condesc</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">BoxOffice</span>, <span class="va">Movies</span><span class="op">[</span>,<span class="op">-</span><span class="fl">7</span><span class="op">]</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<pre><code>$variables
  variable       measure association permutation.pvalue
1    Genre          Eta2       0.173              0.000
2 ArtHouse          Eta2       0.075              0.000
3  Country          Eta2       0.048              0.000
4   Budget Kendall's tau       0.518              0.000
5  Critics Kendall's tau       0.006              0.387
6 Festival          Eta2       0.000              0.764

$categories
        categories median.y.in.xcat median.y.global mad.y.in.xcat mad.y.global    cor
9      Genre.SciFi           944784          138609        853626       137253  0.294
14     ArtHouse.No           298718          138609        257715       137253  0.274
2  Genre.Animation           954956          138609        853018       137253  0.211
13     Country.USA           356692          138609        286508       137253  0.192
1     Genre.Action           291945          138609        247538       137253  0.087
10  Country.Europe           153755          138609        150015       137253  0.068
17    Festival.Yes           228749          138609        207635       137253  0.008
5     Genre.Comedy           230615          138609        210550       137253  0.004
3      Genre.Other           249037          138609        231954       137253 -0.005
16     Festival.No           129629          138609        127957       137253 -0.008
12   Country.Other            64893          138609         46042       137253 -0.013
8     Genre.Horror           293118          138609        176131       137253 -0.015
 [ reached 'max' / getOption("max.print") -- omitted 5 rows ]</code></pre>
<p><br>
The <code>darma</code> function presents the results in a form close to
that of a table of results of a regression.</p>
<p>When the variable Y is numerical, the function computes :</p>
<ul>
<li>for numerical X variables, Kendall’s tau and the p-value of the
corresponding permutation test</li>
<li>for the categories of the categorical X variables, the median of Y
in the category, the point biserial correlation and the p-value of the
corresponding permutation test</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/darma.html">darma</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">BoxOffice</span>, <span class="va">Movies</span><span class="op">[</span>,<span class="op">-</span><span class="fl">7</span><span class="op">]</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">category</th>
<th align="right">median</th>
<th align="right">association</th>
<th align="right">perm.pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Budget</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">0.518</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">Genre</td>
<td align="left">Action</td>
<td align="right">301483.7</td>
<td align="right">0.087</td>
<td align="right">0.004</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Animation</td>
<td align="right">990790.2</td>
<td align="right">0.211</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Other</td>
<td align="right">254002.8</td>
<td align="right">-0.005</td>
<td align="right">0.391</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">ComDram</td>
<td align="right">96221.7</td>
<td align="right">-0.114</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Comedy</td>
<td align="right">236703.8</td>
<td align="right">0.004</td>
<td align="right">0.409</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Documentary</td>
<td align="right">13823.2</td>
<td align="right">-0.108</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Drama</td>
<td align="right">51111.1</td>
<td align="right">-0.162</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Horror</td>
<td align="right">296015.2</td>
<td align="right">-0.015</td>
<td align="right">0.291</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">SciFi</td>
<td align="right">989158.5</td>
<td align="right">0.294</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Country</td>
<td align="left">Europe</td>
<td align="right">161441.5</td>
<td align="right">0.068</td>
<td align="right">0.014</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">France</td>
<td align="right">82312.8</td>
<td align="right">-0.211</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Other</td>
<td align="right">64304.0</td>
<td align="right">-0.013</td>
<td align="right">0.365</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">USA</td>
<td align="right">366233.7</td>
<td align="right">0.192</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">ArtHouse</td>
<td align="left">No</td>
<td align="right">307344.0</td>
<td align="right">0.274</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">47084.8</td>
<td align="right">-0.274</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Festival</td>
<td align="left">No</td>
<td align="right">134006.6</td>
<td align="right">-0.008</td>
<td align="right">0.445</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">236910.7</td>
<td align="right">0.008</td>
<td align="right">0.404</td>
</tr>
<tr class="odd">
<td align="left">Critics</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">0.006</td>
<td align="right">0.373</td>
</tr>
</tbody>
</table>
<p><br>
When the variable Y is categorical, the function computes :</p>
<ul>
<li>for numerical X variables, the point biserial correlation and the
p-value of the corresponding permutation test</li>
<li>for the categories of the categorical X variables, the percentage of
Y in the category, the phi coefficient and the p-value of the
corresponding permutation test.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../../reference/darma.html">darma</a></span><span class="op">(</span><span class="va">Movies</span><span class="op">$</span><span class="va">Festival</span>, <span class="va">Movies</span><span class="op">[</span>,<span class="op">-</span><span class="fl">5</span><span class="op">]</span>, target<span class="op">=</span><span class="fl">2</span>, nperm<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable</th>
<th align="left">category</th>
<th align="right">percent</th>
<th align="right">association</th>
<th align="right">perm.pvalue</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Budget</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">-0.057</td>
<td align="right">0.029</td>
</tr>
<tr class="even">
<td align="left">Genre</td>
<td align="left">Action</td>
<td align="right">7.9</td>
<td align="right">0.003</td>
<td align="right">0.460</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Animation</td>
<td align="right">2.2</td>
<td align="right">-0.046</td>
<td align="right">0.094</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Other</td>
<td align="right">11.5</td>
<td align="right">0.024</td>
<td align="right">0.257</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">ComDram</td>
<td align="right">8.7</td>
<td align="right">0.016</td>
<td align="right">0.335</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Comedy</td>
<td align="right">2.7</td>
<td align="right">-0.100</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Documentary</td>
<td align="right">2.6</td>
<td align="right">-0.055</td>
<td align="right">0.059</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Drama</td>
<td align="right">14.9</td>
<td align="right">0.153</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Horror</td>
<td align="right">0.0</td>
<td align="right">-0.046</td>
<td align="right">0.078</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">SciFi</td>
<td align="right">6.1</td>
<td align="right">-0.013</td>
<td align="right">0.318</td>
</tr>
<tr class="odd">
<td align="left">Country</td>
<td align="left">Europe</td>
<td align="right">9.7</td>
<td align="right">0.021</td>
<td align="right">0.249</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">France</td>
<td align="right">8.1</td>
<td align="right">0.019</td>
<td align="right">0.258</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Other</td>
<td align="right">7.7</td>
<td align="right">0.000</td>
<td align="right">0.479</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">USA</td>
<td align="right">6.4</td>
<td align="right">-0.032</td>
<td align="right">0.154</td>
</tr>
<tr class="odd">
<td align="left">ArtHouse</td>
<td align="left">No</td>
<td align="right">1.8</td>
<td align="right">-0.229</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14.0</td>
<td align="right">0.229</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">Critics</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">0.204</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">BoxOffice</td>
<td align="left"></td>
<td align="right">NA</td>
<td align="right">0.008</td>
<td align="right">0.680</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="relationships-between-all-variables-in-a-set">Relationships between all variables in a set<a class="anchor" aria-label="anchor" href="#relationships-between-all-variables-in-a-set"></a>
</h2>
<p>Finally, the <code>ggassoc_*</code> functions are designed to be
integrated in the plot matrices of the <a href="https://ggobi.github.io/ggally/" class="external-link"><code>GGally</code></a> package.
It is thus possible to use them to represent in a single plot all the
bivariate relations of a group of variables.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/" class="external-link">GGally</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html" class="external-link">ggpairs</a></span><span class="op">(</span><span class="va">Movies</span>,</span>
<span>        lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="va">ggassoc_scatter</span>,</span>
<span>                     combo <span class="op">=</span> <span class="va">ggassoc_boxplot</span>,</span>
<span>                     discrete <span class="op">=</span> <span class="va">ggassoc_crosstab</span><span class="op">)</span>,</span>
<span>        upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="va">ggassoc_scatter</span>,</span>
<span>                     combo <span class="op">=</span> <span class="va">ggassoc_boxplot</span>,</span>
<span>                     discrete <span class="op">=</span> <span class="va">ggassoc_crosstab</span><span class="op">)</span>,</span>
<span>        diag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/wrap.html" class="external-link">wrap</a></span><span class="op">(</span><span class="st">"diagAxis"</span>, gridLabelSize <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>                           discrete <span class="op">=</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/wrap.html" class="external-link">wrap</a></span><span class="op">(</span><span class="st">"diagAxis"</span>, gridLabelSize <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="Tutorial_descr_files/figure-html/ggally-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://github.com/nicolas-robette" class="external-link">Nicolas Robette</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
